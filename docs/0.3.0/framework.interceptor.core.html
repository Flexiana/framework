<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>framework.interceptor.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script><link rel="stylesheet" type="text/css" href="css/xiana.css" /></head><body><div id="header"><div class="logo"><h3>Xiana logo here</h3></div><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Framework</span> <span class="project-version">0.3.0</span></span></a></h1></div><div class="sidebar primary"><div class="logo"><h3>Or Here</h3></div><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="Getting-Started.html"><div class="inner"><span>Getting Started</span></div></a></li><li class="depth-1 "><a href="How-To.html"><div class="inner"><span>How to guides</span></div></a></li><li class="depth-1 "><a href="Development-Guide.html"><div class="inner"><span>Development guide</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>framework</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>acl</span></div></div></li><li class="depth-3"><a href="framework.acl.builder.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>builder</span></div></a></li><li class="depth-4 branch"><a href="framework.acl.builder.builder-functions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>builder-functions</span></div></a></li><li class="depth-4 branch"><a href="framework.acl.builder.permissions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>permissions</span></div></a></li><li class="depth-4"><a href="framework.acl.builder.roles.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>roles</span></div></a></li><li class="depth-3 branch"><a href="framework.acl.core.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3"><a href="framework.acl.core-functions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core-functions</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -207px;"><span class="top" style="height: 216px;"></span><span class="bottom"></span></span><span>app</span></div></div></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>view</span></div></div></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>css</span></div></div></li><li class="depth-5"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tailwind</span></div></div></li><li class="depth-6 branch"><a href="framework.app.view.css.tailwind.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-6 branch"><a href="framework.app.view.css.tailwind.helpers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>helpers</span></div></a></li><li class="depth-6 branch"><a href="framework.app.view.css.tailwind.preparers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>preparers</span></div></a></li><li class="depth-6"><a href="framework.app.view.css.tailwind.resolvers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>resolvers</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -238px;"><span class="top" style="height: 247px;"></span><span class="bottom"></span></span><span>auth</span></div></div></li><li class="depth-3"><a href="framework.auth.hash.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>hash</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>config</span></div></div></li><li class="depth-3"><a href="framework.config.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>db</span></div></div></li><li class="depth-3 branch"><a href="framework.db.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>impl</span></div></div></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>migrations</span></div></div></li><li class="depth-5 branch"><a href="framework.db.impl.migrations.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-5"><a href="framework.db.impl.migrations.migratus.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>migratus</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>migrations</span></div></div></li><li class="depth-4"><a href="framework.db.migrations.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3 branch"><a href="framework.db.postgresql.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>postgresql</span></div></a></li><li class="depth-3"><a href="framework.db.sql.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sql</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -300px;"><span class="top" style="height: 309px;"></span><span class="bottom"></span></span><span>interceptor</span></div></div></li><li class="depth-3 branch current"><a href="framework.interceptor.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3 branch"><a href="framework.interceptor.muuntaja.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>muuntaja</span></div></a></li><li class="depth-3 branch"><a href="framework.interceptor.queue.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>queue</span></div></a></li><li class="depth-3"><a href="framework.interceptor.wrap.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>wrap</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>mail</span></div></div></li><li class="depth-3"><a href="framework.mail.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>rbac</span></div></div></li><li class="depth-3"><a href="framework.rbac.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>route</span></div></div></li><li class="depth-3 branch"><a href="framework.route.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3"><a href="framework.route.helpers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>helpers</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>session</span></div></div></li><li class="depth-3"><a href="framework.session.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>state</span></div></div></li><li class="depth-3"><a href="framework.state.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>webserver</span></div></div></li><li class="depth-3"><a href="framework.webserver.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree" style="top: -1478px;"><span class="top" style="height: 1487px;"></span><span class="bottom"></span></span><span>xiana</span></div></div></li><li class="depth-2 branch"><a href="xiana.commons.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>commons</span></div></a></li><li class="depth-2"><a href="xiana.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li></ul></div><div class="sidebar secondary"><div class="logo"><h3>Or Here</h3></div><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="framework.interceptor.core.html#var--user-role"><div class="inner"><span>-user-role</span></div></a></li><li class="depth-1"><a href="framework.interceptor.core.html#var-db-access"><div class="inner"><span>db-access</span></div></a></li><li class="depth-1"><a href="framework.interceptor.core.html#var-log"><div class="inner"><span>log</span></div></a></li><li class="depth-1"><a href="framework.interceptor.core.html#var-message"><div class="inner"><span>message</span></div></a></li><li class="depth-1"><a href="framework.interceptor.core.html#var-muuntaja"><div class="inner"><span>muuntaja</span></div></a></li><li class="depth-1"><a href="framework.interceptor.core.html#var-params"><div class="inner"><span>params</span></div></a></li><li class="depth-1"><a href="framework.interceptor.core.html#var-session-user-id"><div class="inner"><span>session-user-id</span></div></a></li><li class="depth-1"><a href="framework.interceptor.core.html#var-session-user-role"><div class="inner"><span>session-user-role</span></div></a></li><li class="depth-1"><a href="framework.interceptor.core.html#var-side-effect"><div class="inner"><span>side-effect</span></div></a></li><li class="depth-1"><a href="framework.interceptor.core.html#var-view"><div class="inner"><span>view</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">framework.interceptor.core</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var--user-role"><h3>-user-role</h3><div class="usage"><code>(-user-role state role)</code></div><div class="doc"><pre class="plaintext">Update the user role.
</pre></div><div class="src-link"><a href="https://github.com/Flexiana/framework/blob/f2e2acd7e82ccab874cc406be511025423955596/src/framework/interceptor/core.clj#L127">view source</a></div></div><div class="public anchor" id="var-db-access"><h3>db-access</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Database access interceptor.
Enter: nil.
Leave: Fetch and execute a given query using the chosen database
driver, if succeeds associate its results into state response data.
Remember the entry query must be a sql-map, e.g:
{:select [:*] :from [:users]}.</pre></div><div class="src-link"><a href="https://github.com/Flexiana/framework/blob/f2e2acd7e82ccab874cc406be511025423955596/src/framework/interceptor/core.clj#L61">view source</a></div></div><div class="public anchor" id="var-log"><h3>log</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Log interceptor.
Enter: Print 'Enter:' followed by the complete state map.
Leave: Print 'Leave:' followed by the complete state map.</pre></div><div class="src-link"><a href="https://github.com/Flexiana/framework/blob/f2e2acd7e82ccab874cc406be511025423955596/src/framework/interceptor/core.clj#L17">view source</a></div></div><div class="public anchor" id="var-message"><h3>message</h3><div class="usage"><code>(message msg)</code></div><div class="doc"><pre class="plaintext">This interceptor creates a function that prints predefined message.
Enter: Print an arbitrary message.
Leave: Print an arbitrary message.</pre></div><div class="src-link"><a href="https://github.com/Flexiana/framework/blob/f2e2acd7e82ccab874cc406be511025423955596/src/framework/interceptor/core.clj#L79">view source</a></div></div><div class="public anchor" id="var-muuntaja"><h3>muuntaja</h3><div class="usage"><code>(muuntaja)</code><code>(muuntaja interceptor)</code></div><div class="doc"><pre class="plaintext">Muuntaja encoder/decoder interceptor.
</pre></div><div class="src-link"><a href="https://github.com/Flexiana/framework/blob/f2e2acd7e82ccab874cc406be511025423955596/src/framework/interceptor/core.clj#L152">view source</a></div></div><div class="public anchor" id="var-params"><h3>params</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Update the request map with parsed url-encoded parameters.
Adds the following keys to the request map:

:query-params - a map of parameters from the query string
:form-params  - a map of parameters from the body
:params       - a merged map of all types of parameter

Enter: TODO.
Leave: nil.</pre></div><div class="src-link"><a href="https://github.com/Flexiana/framework/blob/f2e2acd7e82ccab874cc406be511025423955596/src/framework/interceptor/core.clj#L45">view source</a></div></div><div class="public anchor" id="var-session-user-id"><h3>session-user-id</h3><div class="usage"><code>(session-user-id)</code><code>(session-user-id session-instance)</code></div><div class="doc"><pre class="plaintext">This interceptor handles the session user id management.
Enter: Get the session id from the request header, if
that operation doesn't succeeds a new session is created an associated to the
current state, otherwise the cached session data is used.
Leave: Verify if the state has a session id, if so add it to
the session instance and remove the new session property of the current state.
The final step is the association of the session id to the response header.</pre></div><div class="src-link"><a href="https://github.com/Flexiana/framework/blob/f2e2acd7e82ccab874cc406be511025423955596/src/framework/interceptor/core.clj#L87">view source</a></div></div><div class="public anchor" id="var-session-user-role"><h3>session-user-role</h3><div class="usage"><code>(session-user-role)</code><code>(session-user-role f role)</code></div><div class="doc"><pre class="plaintext">This interceptor updates session data user role:authorization
from the given request header.
Enter: Fetch the authorization from its request/state
if succeeds update the current state with that information,
also update the user role with a custom value or the default :guest.
Leave: nil.</pre></div><div class="src-link"><a href="https://github.com/Flexiana/framework/blob/f2e2acd7e82ccab874cc406be511025423955596/src/framework/interceptor/core.clj#L132">view source</a></div></div><div class="public anchor" id="var-side-effect"><h3>side-effect</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Side-effect interceptor.
Enter: nil.
Leave: Fetch and execute the state registered
side-effect procedure, if none was found execute: `xiana/ok`.</pre></div><div class="src-link"><a href="https://github.com/Flexiana/framework/blob/f2e2acd7e82ccab874cc406be511025423955596/src/framework/interceptor/core.clj#L24">view source</a></div></div><div class="public anchor" id="var-view"><h3>view</h3><div class="usage"></div><div class="doc"><pre class="plaintext">View interceptor.
Enter: nil.
Leave: Fetch and execute the state view registered
procedure, if none was found execute: `xiana/ok`.</pre></div><div class="src-link"><a href="https://github.com/Flexiana/framework/blob/f2e2acd7e82ccab874cc406be511025423955596/src/framework/interceptor/core.clj#L34">view source</a></div></div></div></body></html>