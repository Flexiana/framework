<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>Interceptors implemented in Xiana</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script><link rel="stylesheet" type="text/css" href="css/xiana.css" /></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name"></span> <span class="project-version"></span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="welcome.html"><div class="inner"><span>Xiana framework</span></div></a></li><li class="depth-1 "><a href="conventions.html"><div class="inner"><span>Conventions</span></div></a></li><li class="depth-1 "><a href="tutorials.html"><div class="inner"><span>Tutorials</span></div></a></li><li class="depth-1  current"><a href="interceptors.html"><div class="inner"><span>Interceptors implemented in Xiana</span></div></a></li><li class="depth-1 "><a href="contribution.html"><div class="inner"><span>Contribution</span></div></a></li><li class="depth-1 "><a href="getting-started.html"><div class="inner"><span>How to make a Todo app using Xiana</span></div></a></li><li class="depth-1 "><a href="How-To.html"><div class="inner"><span>How to</span></div></a></li><li class="depth-1 "><a href="Development-Guide.html"><div class="inner"><span>Development guide</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>xiana</span></div></div></li><li class="depth-2 branch"><a href="xiana.coercion.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>coercion</span></div></a></li><li class="depth-2 branch"><a href="xiana.commons.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>commons</span></div></a></li><li class="depth-2 branch"><a href="xiana.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-2 branch"><a href="xiana.cookies.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cookies</span></div></a></li><li class="depth-2"><a href="xiana.db.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db</span></div></a></li><li class="depth-3"><a href="xiana.db.migrate.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>migrate</span></div></a></li><li class="depth-2 branch"><a href="xiana.handler.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>handler</span></div></a></li><li class="depth-2 branch"><a href="xiana.hash.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>hash</span></div></a></li><li class="depth-2"><a href="xiana.interceptor.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interceptor</span></div></a></li><li class="depth-3 branch"><a href="xiana.interceptor.error.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>error</span></div></a></li><li class="depth-3 branch"><a href="xiana.interceptor.muuntaja.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>muuntaja</span></div></a></li><li class="depth-3 branch"><a href="xiana.interceptor.queue.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>queue</span></div></a></li><li class="depth-3"><a href="xiana.interceptor.wrap.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>wrap</span></div></a></li><li class="depth-2 branch"><a href="xiana.mail.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>mail</span></div></a></li><li class="depth-2 branch"><a href="xiana.rbac.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rbac</span></div></a></li><li class="depth-2"><a href="xiana.route.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>route</span></div></a></li><li class="depth-3"><a href="xiana.route.helpers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>helpers</span></div></a></li><li class="depth-2 branch"><a href="xiana.scheduler.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>scheduler</span></div></a></li><li class="depth-2 branch"><a href="xiana.session.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>session</span></div></a></li><li class="depth-2 branch"><a href="xiana.sse.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sse</span></div></a></li><li class="depth-2 branch"><a href="xiana.state.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>state</span></div></a></li><li class="depth-2 branch"><a href="xiana.webserver.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>webserver</span></div></a></li><li class="depth-2"><a href="xiana.websockets.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>websockets</span></div></a></li><li class="depth-3"><a href="xiana.websockets.router-helpers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>router-helpers</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><p><img src="resources/images/Xiana.png" width="242" /></p>
<h1><a href="#interceptors-implemented-in-xiana" id="interceptors-implemented-in-xiana"></a>Interceptors implemented in Xiana</h1>
<ul>
<li><a href="#log">log</a></li>
<li><a href="#side-effect">side-effect</a></li>
<li><a href="#view">view</a></li>
<li><a href="#params">params</a></li>
<li><a href="#db-access">db-access</a></li>
<li><a href="#message">message</a></li>
<li><a href="#muuntaja">muuntaja</a></li>
<li><a href="#session">session</a></li>
<li><a href="#guest-session">guest-session</a></li>
<li><a href="#rbac">rbac</a></li>
<li><a href="#coercion">coercion</a></li>
<li><a href="#cookies">cookies</a></li>
<li><a href="#prune-get-request-bodies">prune-get-request-bodies</a></li>
</ul>
<h2><a href="#log" id="log"></a>log</h2>
<p>Prints the actual state map on both <code>:enter</code> and <code>:leave</code> phases.</p>
<h2><a href="#side-effect" id="side-effect"></a>side-effect</h2>
<p>Executes the function from state’s <code>:side-effect</code> key, if there is one. It’s often placed between database access and response, to execute actions based on the database result.</p>
<h2><a href="#view" id="view"></a>view</h2>
<p>The view interceptor renders the response map based the given state via the provided <code>:view</code> keyword.</p>
<h2><a href="#params" id="params"></a>params</h2>
<p>Params for resolving the request parameters.</p>
<h2><a href="#db-access" id="db-access"></a>db-access</h2>
<p>Executes <code>:query</code> and <code>:db-queries</code> keys on <code>:leave</code> phase.</p>
<h2><a href="#message" id="message"></a>message</h2>
<p>Prints out provided message on <code>:leave</code> and on <code>:enter</code></p>
<h2><a href="#muuntaja" id="muuntaja"></a>muuntaja</h2>
<p>Decodes the request and encodes the response based on request’s Accept and Content-type headers</p>
<h2><a href="#session" id="session"></a>session</h2>
<p>On <code>:enter</code>, either injects session-data based on headers, cookies or query params’ session-id, or short circuits execution with invalid or missing session responses.</p>
<p>On <code>:leave</code> updates session storage with session-data from state.</p>
<h2><a href="#guest-session" id="guest-session"></a>guest-session</h2>
<p>Same as  <a href="#session">session</a>, except that if session is missing or not provided, creates a new session for <code>:guest</code> user, with random UUID user-id.</p>
<h2><a href="#rbac" id="rbac"></a>rbac</h2>
<p>On <code>:enter</code>, decides if the given user (from session-data user role) has permissions for a given action. When no permission is found, short circuits the execution with <code>:status 403</code>.</p>
<p>On <code>:leave</code>, tightens the database query with given <code>:restriction-fn</code>, if any.</p>
<h2><a href="#coercion" id="coercion"></a>coercion</h2>
<p>On <code>:enter</code>, performs request parameter wrapping, and validates by given roles.</p>
<p>On <code>:leave</code>, validates the response body with the given malli schema.</p>
<h2><a href="#cookies" id="cookies"></a>cookies</h2>
<pre><code>Cookie request/response wrapper
</code></pre>
<h2><a href="#prune-get-request-bodies" id="prune-get-request-bodies"></a>prune-get-request-bodies</h2>
<p>On <code>:enter</code>, removes both <code>body</code> and <code>:body-params</code> from GET requests.</p>
</div></div></div></body></html>