<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>xiana.interceptor documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script><link rel="stylesheet" type="text/css" href="css/xiana.css" /></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name"></span> <span class="project-version"></span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="welcome.html"><div class="inner"><span>Xiana framework</span></div></a></li><li class="depth-1 "><a href="conventions.html"><div class="inner"><span>Conventions</span></div></a></li><li class="depth-1 "><a href="tutorials.html"><div class="inner"><span>Tutorials</span></div></a></li><li class="depth-1 "><a href="modules.html"><div class="inner"><span>Modules</span></div></a></li><li class="depth-1 "><a href="interceptors.html"><div class="inner"><span>Interceptors implemented in Xiana</span></div></a></li><li class="depth-1 "><a href="contribution.html"><div class="inner"><span>Contribution</span></div></a></li><li class="depth-1 "><a href="getting-started.html"><div class="inner"><span>How to make a Todo app using Xiana</span></div></a></li><li class="depth-1 "><a href="How-To.html"><div class="inner"><span>How to</span></div></a></li><li class="depth-1 "><a href="Development-Guide.html"><div class="inner"><span>Development guide</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>xiana</span></div></div></li><li class="depth-2 branch"><a href="xiana.coercion.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>coercion</span></div></a></li><li class="depth-2 branch"><a href="xiana.commons.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>commons</span></div></a></li><li class="depth-2 branch"><a href="xiana.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-2 branch"><a href="xiana.cookies.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cookies</span></div></a></li><li class="depth-2"><a href="xiana.db.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db</span></div></a></li><li class="depth-3"><a href="xiana.db.migrate.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>migrate</span></div></a></li><li class="depth-2 branch"><a href="xiana.handler.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>handler</span></div></a></li><li class="depth-2 branch"><a href="xiana.hash.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>hash</span></div></a></li><li class="depth-2 current"><a href="xiana.interceptor.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interceptor</span></div></a></li><li class="depth-3 branch"><a href="xiana.interceptor.error.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>error</span></div></a></li><li class="depth-3 branch"><a href="xiana.interceptor.muuntaja.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>muuntaja</span></div></a></li><li class="depth-3 branch"><a href="xiana.interceptor.queue.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>queue</span></div></a></li><li class="depth-3"><a href="xiana.interceptor.wrap.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>wrap</span></div></a></li><li class="depth-2 branch"><a href="xiana.mail.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>mail</span></div></a></li><li class="depth-2 branch"><a href="xiana.rbac.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rbac</span></div></a></li><li class="depth-2"><a href="xiana.route.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>route</span></div></a></li><li class="depth-3"><a href="xiana.route.helpers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>helpers</span></div></a></li><li class="depth-2 branch"><a href="xiana.scheduler.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>scheduler</span></div></a></li><li class="depth-2 branch"><a href="xiana.session.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>session</span></div></a></li><li class="depth-2 branch"><a href="xiana.sse.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sse</span></div></a></li><li class="depth-2 branch"><a href="xiana.state.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>state</span></div></a></li><li class="depth-2 branch"><a href="xiana.webserver.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>webserver</span></div></a></li><li class="depth-2"><a href="xiana.websockets.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>websockets</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="xiana.interceptor.html#var--user-role"><div class="inner"><span>-user-role</span></div></a></li><li class="depth-1"><a href="xiana.interceptor.html#var-log"><div class="inner"><span>log</span></div></a></li><li class="depth-1"><a href="xiana.interceptor.html#var-message"><div class="inner"><span>message</span></div></a></li><li class="depth-1"><a href="xiana.interceptor.html#var-muuntaja"><div class="inner"><span>muuntaja</span></div></a></li><li class="depth-1"><a href="xiana.interceptor.html#var-params"><div class="inner"><span>params</span></div></a></li><li class="depth-1"><a href="xiana.interceptor.html#var-prune-get-request-bodies"><div class="inner"><span>prune-get-request-bodies</span></div></a></li><li class="depth-1"><a href="xiana.interceptor.html#var-session-user-id"><div class="inner"><span>session-user-id</span></div></a></li><li class="depth-1"><a href="xiana.interceptor.html#var-session-user-role"><div class="inner"><span>session-user-role</span></div></a></li><li class="depth-1"><a href="xiana.interceptor.html#var-side-effect"><div class="inner"><span>side-effect</span></div></a></li><li class="depth-1"><a href="xiana.interceptor.html#var-view"><div class="inner"><span>view</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">xiana.interceptor</h1><div class="doc"><pre class="plaintext">Collection of useful interceptors
</pre></div><div class="public anchor" id="var--user-role"><h3>-user-role</h3><div class="usage"><code>(-user-role state role)</code></div><div class="doc"><pre class="plaintext">Update the user role.
</pre></div></div><div class="public anchor" id="var-log"><h3>log</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Log interceptor.
Enter: Print 'Enter:' followed by the complete state map.
Leave: Print 'Leave:' followed by the complete state map.</pre></div></div><div class="public anchor" id="var-message"><h3>message</h3><div class="usage"><code>(message msg)</code></div><div class="doc"><pre class="plaintext">This interceptor creates a function that prints predefined message.
Enter: Print an arbitrary message.
Leave: Print an arbitrary message.</pre></div></div><div class="public anchor" id="var-muuntaja"><h3>muuntaja</h3><div class="usage"><code>(muuntaja)</code><code>(muuntaja interceptor)</code></div><div class="doc"><pre class="plaintext">Muuntaja encoder/decoder interceptor.
</pre></div></div><div class="public anchor" id="var-params"><h3>params</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Update the request map with parsed url-encoded parameters.
Adds the following keys to the request map:

:query-params - a map of parameters from the query string
:form-params  - a map of parameters from the body
:params       - a merged map of all types of parameter

Enter: TODO.
Leave: nil.</pre></div></div><div class="public anchor" id="var-prune-get-request-bodies"><h3>prune-get-request-bodies</h3><div class="usage"></div><div class="doc"><pre class="plaintext">This interceptor removes bodies from GET requests on Enter.
</pre></div></div><div class="public anchor" id="var-session-user-id"><h3>session-user-id</h3><div class="usage"><code>(session-user-id)</code></div><div class="doc"><pre class="plaintext">This interceptor handles the session user id management.
Enter: Get the session id from the request header, if
that operation doesn't succeeds a new session is created an associated to the
current state, otherwise the cached session data is used.
Leave: Verify if the state has a session id, if so add it to
the session instance and remove the new session property of the current state.
The final step is the association of the session id to the response header.</pre></div></div><div class="public anchor" id="var-session-user-role"><h3>session-user-role</h3><div class="usage"><code>(session-user-role)</code><code>(session-user-role f role)</code></div><div class="doc"><pre class="plaintext">This interceptor updates session data user role:authorization
from the given request header.
Enter: Fetch the authorization from its request/state
if succeeds update the current state with that information,
also update the user role with a custom value or the default :guest.
Leave: nil.</pre></div></div><div class="public anchor" id="var-side-effect"><h3>side-effect</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Side-effect interceptor.
Enter: nil.
Leave: apply `:side-effect` state key to state if it exists.</pre></div></div><div class="public anchor" id="var-view"><h3>view</h3><div class="usage"></div><div class="doc"><pre class="plaintext">View interceptor.
Enter: nil. Leave: apply `:view` state key to state if it exists and
`:response` is absent.</pre></div></div></div></body></html>