#!/usr/bin/env bb
(require '[babashka.fs :as fs]
         '[clojure.java.shell :refer [sh]])

(println (sh "lein" "codox"))
(let [version (nth (read-string (slurp "project.clj")) 2)]
  (sh "mv" "docs/new" (str "docs/" version))
  (sh "rm" "docs/index.html")
  (sh "cp" "script/template-index.html" "docs/index.html")
  (sh "bash" "-c" (str "sed -i bak 's/<current-version-number>/" version "/'" " docs/index.html")))
