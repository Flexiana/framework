<p><img src="resources/images/Xiana.png" width="242"></p><h1 id="interceptors&#95;implemented&#95;in&#95;xiana">Interceptors implemented in Xiana</h1><ul><li><a href='#log'>log</a></li><li><a href='#side_effect'>side-effect</a></li><li><a href='#view'>view</a></li><li><a href='#params'>params</a></li><li><a href='#db_access'>db-access</a></li><li><a href='#message'>message</a></li><li><a href='#muuntaja'>muuntaja</a></li><li><a href='#session'>session</a></li><li><a href='#guest_session'>guest-session</a></li><li><a href='#rbac'>rbac</a></li><li><a href='#coercion'>coercion</a></li><li><a href='#cookies'>cookies</a></li><li><a href='#prune_get_request_bodies'>prune-get-request-bodies</a></li></ul><h2 id="log">log</h2><p>Prints the actual state map on both <code>:enter</code> and <code>:leave</code> phases.</p><h2 id="side-effect">side-effect</h2><p>Executes the function from state's <code>:side-effect</code> key, if there is one. It's often placed between database access and response, to execute actions based on the database result.</p><h2 id="view">view</h2><p>The view interceptor renders the response map based the given state via the provided <code>:view</code> keyword.</p><h2 id="params">params</h2><p>Params for resolving the request parameters.</p><h2 id="db-access">db-access</h2><p>Executes <code>:query</code> and <code>:db-queries</code> keys on <code>:leave</code> phase.</p><h2 id="message">message</h2><p>Prints out provided message on <code>:leave</code> and on <code>:enter</code></p><h2 id="muuntaja">muuntaja</h2><p>Decodes the request and encodes the response based on request's Accept and Content-type headers</p><h2 id="session">session</h2><p>On <code>:enter</code>, either injects session-data based on headers, cookies or query params' session-id, or short circuits execution with invalid or missing session responses.</p><p>On <code>:leave</code> updates session storage with session-data from state.</p><h2 id="guest-session">guest-session</h2><p>Same as  <a href='#session'>session</a>, except that if session is missing or not provided, creates a new session for <code>:guest</code> user, with random UUID user-id.</p><h2 id="rbac">rbac</h2><p>On <code>:enter</code>, decides if the given user (from session-data user role) has permissions for a given action. When no permission is found, short circuits the execution with <code>:status 403</code>.</p><p>On <code>:leave</code>, tightens the database query with given <code>:restriction-fn</code>, if any.</p><h2 id="coercion">coercion</h2><p>On <code>:enter</code>, performs request parameter wrapping, and validates by given roles.</p><p>On <code>:leave</code>, validates the response body with the given malli schema.</p><h2 id="cookies">cookies</h2><pre><code>Cookie request/response wrapper</code></pre><h2 id="prune-get-request-bodies">prune-get-request-bodies</h2><p>On <code>:enter</code>, removes both <code>body</code> and <code>:body-params</code> from GET requests.</p>